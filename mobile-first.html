<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Panel de Mapas – Fundación Reaching</title>
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#0b1020">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <style>
    :root{
      --bg:#0b1020; --card:#121933; --txt:#f8fafc; --muted:#cbd5e1;
      --brand:#22c55e; --brand2:#10b981; --border:rgba(255,255,255,.08);
      --radius:16px; --shadow:0 8px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(165deg,#0b1020,#0d1327 55%,#0b1020);color:var(--txt);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased}
    .wrap{min-height:100svh;min-height:100dvh;display:flex;flex-direction:column}

    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.2) blur(8px);
      background:rgba(2,6,23,.6);border-bottom:1px solid var(--border)}
    .container{max-width:1024px;margin:0 auto;padding:clamp(12px,2vw,16px)}
    .brand{display:flex;gap:12px;align-items:center}
    .brand img{width:40px;height:auto;filter:drop-shadow(0 2px 6px rgba(34,197,94,.5))}
    .brand h1{font-size:clamp(16px,2.4vw,18px);margin:0;font-weight:800;letter-spacing:.2px}
    .brand small{display:block;color:var(--muted);font-weight:500}

    main{flex:1;}
    .grid{display:grid;gap:14px;padding:16px;grid-template-columns:repeat(2,1fr)}
    @media (min-width:700px){.grid{grid-template-columns:repeat(3,1fr);}}

    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
      box-shadow:var(--shadow); padding:14px; display:flex; flex-direction:column; gap:8px;
      text-decoration:none;color:var(--txt); min-height:110px; position:relative;
      transition:transform .2s ease, box-shadow .3s ease, opacity .6s ease;
      opacity:0; transform:translateY(20px)}
    .card.appear{opacity:1; transform:translateY(0)}
    .card:hover{transform:translateY(-2px)}
    .card h3{margin:0;font-size:16px}
    .card p{margin:0;color:var(--muted);font-size:13px;line-height:1.25}
    .pill{position:absolute; top:10px; right:10px; font-size:11px; padding:4px 8px; border-radius:999px;
      background:rgba(16,185,129,.15); color:#a7f3d0; border:1px solid rgba(16,185,129,.25)}

    footer{padding:10px 16px; text-align:center; color:var(--muted); font-size:12px}

    /* Modal responsive con animación */
    .overlay{position:fixed; inset:0; z-index:9999; display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.7); backdrop-filter:blur(2px); padding:10px;
      opacity:0; pointer-events:none; transition:opacity .35s ease}
    .overlay[aria-hidden="false"]{opacity:1; pointer-events:auto}

    .modal{position:relative;width:min(1100px,100%);height:min(92svh,92dvh);
      background:#000;border-radius:18px;overflow:hidden;box-shadow:var(--shadow);
      border:1px solid var(--border); transform:translateY(30px); opacity:0;
      transition:opacity .35s ease, transform .35s ease}
    .overlay[aria-hidden="false"] .modal{transform:translateY(0);opacity:1}

    .modal iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .close{position:absolute;top:8px;right:8px;width:44px;height:44px;border-radius:999px;display:grid;place-items:center;font-size:24px;border:none;cursor:pointer;background:rgba(255,255,255,.9)}
    .close:active{transform:scale(.98)}

    .cta{grid-column:1/-1;display:flex;gap:10px;flex-wrap:wrap}
    .cta a{flex:1;min-width:220px;text-align:center;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#052e16;font-weight:800;padding:12px 16px;border-radius:12px;text-decoration:none}
      .no-tap-hl{-webkit-tap-highlight-color: transparent}
  </style>
</head>
<body class="no-tap-hl">
<div class="wrap">
  <header>
    <div class="container brand">
      <img src="https://fundacionreaching.github.io/assets/branding/logo.gif?v=5" alt="Fundación Reaching" width="40" height="40" decoding="async" fetchpriority="low" onerror="this.remove()">
      <div>
        <h1>Panel de Mapas</h1>
        <small>Fundación Reaching — Mobile‑first</small>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <!-- CTA arriba -->
      <div class="cta" style="margin:0 0 16px 0">
        <a href="https://fundacionreaching.github.io/menu_mapas_google.html" target="_blank" rel="noopener">Abrir Google Satelital en pestaña</a>
        <a href="https://fundacionreaching.github.io/menu_mapas_2.html#google-sat" target="_self">Abrir dentro del Player</a>
      </div>

      <div class="grid">
        <a class="card" href="https://fundacionreaching.github.io/menu_mapas_2.html" target="_blank" rel="noopener">
          <span class="pill">Player</span>
          <h3>Menú de Mapas Unificado</h3>
          <p>Versión oficial. Abre en pestaña para mejor desempeño en móvil.</p>
        </a>

        <a class="card" href="#google-sat" data-open-sat>
          <span class="pill">Overlay</span>
          <h3>Google Maps Satelital</h3>
          <p>Integrado en modal con animación, carga bajo demanda y controles táctiles.</p>
        </a>

        <a class="card" href="https://satellites.pro/Google_plan/Tolima_region_map" target="_blank" rel="noopener">
          <span class="pill">Externo</span>
          <h3>Generador Tolima (satellites.pro)</h3>
          <p>Herramienta externa. Abrir en nueva pestaña por políticas de terceros.</p>
        </a>

        <a class="card" href="#" onclick="alert('Pronto: Bing Maps');return false;">
          <span class="pill">Pronto</span>
          <h3>Bing Maps</h3>
          <p>Integración pendiente.</p>
        </a>

        <a class="card" href="#" onclick="alert('Pronto: OpenStreetMap');return false;">
          <span class="pill">Pronto</span>
          <h3>OpenStreetMap</h3>
          <p>Integración pendiente.</p>
        </a>
      </div>
    </div>
  </main>

  <footer>
    © Fundación Reaching — Hecho con excelencia para la gloria de Dios.
  </footer>
</div>

<!-- Overlay Google Sat integrado -->
<div class="overlay" id="overlay" aria-hidden="true">
  <div class="modal">
    <button class="close" id="close" aria-label="Cerrar">×</button>
    <iframe id="satFrame"
            title="Google Maps Satelital — Fundación Reaching"
            data-src="https://fundacionreaching.github.io/menu_mapas_google.html?v=5"
            loading="lazy"
            referrerpolicy="strict-origin-when-cross-origin"
            sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
  </div>
</div>

<script>
  (function(){
    function setVH(){document.documentElement.style.setProperty('--vh', window.innerHeight * 0.01 + 'px');}
    setVH(); addEventListener('resize', setVH); addEventListener('orientationchange', setVH);
  })();

  (function(){
    const overlay=document.getElementById('overlay');
    const frame=document.getElementById('satFrame');
    const closeBtn=document.getElementById('close');

    function open(){
      if(!frame.src) frame.src=frame.dataset.src;
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
      history.replaceState(null,'','#google-sat');
    }
    function close(){
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
      history.replaceState(null,'',location.pathname+location.search);
    }

    document.addEventListener('click',(e)=>{
      const a=e.target.closest('[data-open-sat]');
      if(!a) return; e.preventDefault(); open();
    });
    closeBtn.addEventListener('click',close);
    overlay.addEventListener('click',(e)=>{if(e.target===overlay) close();});
    document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&overlay.getAttribute('aria-hidden')==='false') close();});

    if(location.hash==="#google-sat") open();
  })();

  // Animación de aparición secuencial de tarjetas
  (function(){
    const cards=document.querySelectorAll('.card');
    const reduce=window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(reduce){ cards.forEach(c=>c.classList.add('appear')); return; }
    cards.forEach((c,i)=>{ setTimeout(()=>c.classList.add('appear'), 120*i); });
  })();
</script>
</body>
</html>
