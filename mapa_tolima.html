<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mapa Interactivo del Tolima - Municipios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: sans-serif; text-align: center; }
    #map { height: 90vh; width: 100%; }
  </style>
</head>
<body>
  <h2>Mapa Interactivo del Tolima</h2>
  <p>Pasa el cursor o haz clic sobre el círculo para ver el municipio y su población</p>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([4.3, -75.1], 8);
    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const municipios = [
      { name: "Ibagué", poblacion: 558815, centro: [4.4381, -75.2329] },
      { name: "El Espinal", poblacion: 76149, centro: [4.1814, -74.8889] },
      { name: "Chaparral", poblacion: 47248, centro: [3.7792, -75.2691] },
      { name: "Honda", poblacion: 26493, centro: [5.2087, -74.7355] },
      { name: "Melgar", poblacion: 37090, centro: [4.2028, -74.6417] },
      { name: "Líbano", poblacion: 35621, centro: [4.9214, -75.0627] },
      { name: "Mariquita", poblacion: 30211, centro: [5.2037, -74.8923] },
      { name: "Guamo", poblacion: 30685, centro: [4.0303, -74.9726] },
      { name: "Coyaima", poblacion: 26590, centro: [3.7338, -75.1333] },
      { name: "Purificación", poblacion: 24915, centro: [3.8594, -74.9353] },
      { name: "Rovira", poblacion: 19873, centro: [4.2429, -75.2676] },
      { name: "Flandes", poblacion: 26541, centro: [4.2845, -74.8038] },
      { name: "Ataco", poblacion: 13452, centro: [3.5927, -75.3819] },
      { name: "Saldaña", poblacion: 16934, centro: [3.9374, -74.9287] },
      { name: "Cajamarca", poblacion: 12890, centro: [4.4412, -75.4468] },
      { name: "Venadillo", poblacion: 16642, centro: [4.7013, -74.9383] },
      { name: "Anzoátegui", poblacion: 7050, centro: [4.6357, -75.0964] },
      { name: "San Antonio", poblacion: 13702, centro: [3.8735, -75.4725] },
      { name: "Suárez", poblacion: 8269, centro: [3.9449, -75.0451] },
      { name: "Santa Isabel", poblacion: 6883, centro: [4.8676, -75.1008] },
      { name: "Villahermosa", poblacion: 11188, centro: [5.0097, -75.2209] },
      { name: "Murillo", poblacion: 5324, centro: [4.8848, -75.1719] },
      { name: "Icononzo", poblacion: 12785, centro: [4.1764, -74.5311] },
      { name: "Palocabildo", poblacion: 7354, centro: [5.0989, -75.0114] },
      { name: "Ambalema", poblacion: 7523, centro: [4.7859, -74.7553] },
      { name: "San Luis", poblacion: 10689, centro: [4.0868, -75.1307] },
      { name: "Villarrica", poblacion: 5351, centro: [4.3739, -74.6829] },
      { name: "Natagaima", poblacion: 21346, centro: [3.6166, -75.0914] },
      { name: "Piedras", poblacion: 6337, centro: [4.5273, -74.9823] },
      { name: "Alpujarra", poblacion: 3124, centro: [3.3803, -74.9396] },
      { name: "Alvarado", poblacion: 8690, centro: [4.6614, -74.9611] },
      { name: "Casabianca", poblacion: 3064, centro: [5.0805, -75.1086] },
      { name: "Coello", poblacion: 9820, centro: [4.2894, -74.9292] },
      { name: "Cunday", poblacion: 10297, centro: [3.9825, -74.6948] },
      { name: "Dolores", poblacion: 5353, centro: [3.5377, -74.9717] },
      { name: "Espinalito", poblacion: 4600, centro: [4.225, -74.75] },
      { name: "Fresno", poblacion: 29821, centro: [5.1522, -75.0387] },
      { name: "Herveo", poblacion: 5078, centro: [5.0939, -75.1928] },
      { name: "Rioblanco", poblacion: 16785, centro: [3.5093, -75.6973] },
      { name: "Planadas", poblacion: 25778, centro: [3.1971, -75.6454] },
      { name: "Valle de San Juan", poblacion: 7457, centro: [4.2781, -75.0934] },
      { name: "San Sebastián de Mariquita", poblacion: 30211, centro: [5.175, -74.95] },      
      { name: "Santa Teresa", poblacion: 3120, centro: [3.925, -75.25] }
    ];

    function getColor(p) {
      return p > 100000 ? '#800026' :
             p > 50000  ? '#BD0026' :
             p > 20000  ? '#E31A1C' :
             p > 10000  ? '#FD8D3C' :
             p > 5000   ? '#FEB24C' :
                          '#FED976';
    }

    municipios.forEach(m => {
      const circle = L.circle(m.centro, {
        radius: Math.max(3000, m.poblacion * 0.05),
        fillColor: getColor(m.poblacion),
        color: 'white',
        weight: 1,
        fillOpacity: 0.7
      }).addTo(map);
      circle.bindPopup(`<strong>${m.name}</strong><br>Población: ${m.poblacion.toLocaleString()}`);
    });
  </script>
</body>
</html>